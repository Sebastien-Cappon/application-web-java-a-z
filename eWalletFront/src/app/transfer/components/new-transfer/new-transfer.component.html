<mat-card *ngIf="activeBuddies$| async as activeBuddies" [formGroup]="transferForm">
    <mat-card-header>
        <mat-card-title background-color="primary"><h1>New transfer</h1></mat-card-title>
    </mat-card-header>
    <mat-card-content>
        <mat-grid-list cols="3" rowHeight="76px" gutterSize="16px">
            <mat-grid-tile [colspan]="2">
                <mat-form-field color="accent">
                    <mat-label>Beneficiary</mat-label>
                    <input matInput type="text" [formControl]="transferBeneficiaryCtrl" [matAutocomplete]="autoBuddies">
                    <mat-autocomplete #autoBuddies="matAutocomplete" [displayWith]="displayFn">
                        <!--<mat-option *ngFor="let activeBuddy of activeBuddies" [value]="activeBuddy.firstname+activeBuddy.lastname">-->
                        <mat-option *ngFor="let activeBuddy of activeBuddies" [value]="activeBuddy">
                            {{ activeBuddy.firstname }} {{ activeBuddy.lastname }}
                        </mat-option>
                    </mat-autocomplete>
                    <mat-error>Please select a buddy to make the transfer to.</mat-error>
                </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile>
                <mat-form-field color="accent">
                    <mat-label>Amount</mat-label>
                    <input matInput currencyMask [formControl]="transferAmountCtrl" [options]="{ allowNegative: false, prefix: '', suffix: '€' }">
                    <mat-error>Transfers under 2€ are not allowed.</mat-error>
                </mat-form-field>
            </mat-grid-tile>
        </mat-grid-list>
        <mat-form-field color="accent">
            <mat-label>Comment <i>(optional)</i></mat-label>
            <textarea matInput [formControl]="transferCommentCtrl" rows="2"></textarea>
        </mat-form-field>
    </mat-card-content>
    <mat-card-actions>
        <button mat-stroked-button color="accent" (click)="onPayMyBuddy()" [disabled]="isLoading">
            <span *ngIf="!isLoading">Pay my buddy</span>
            <mat-spinner *ngIf="isLoading" color="accent" mode="indeterminate"></mat-spinner>
        </button>
    </mat-card-actions>
</mat-card>